<!DOCTYPE html>
<html lang="en">
<head>
    <title>windows</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <style>
			body {
				padding:0;
				margin:0;
				font-weight: bold;
				overflow:hidden;
			}
		</style>
    <script>
        window.onload = function(){// onWindowResize()
                    var clock=document.createElement('div');
                        clock.setAttribute("id","clock");
                                                clock.style.position='absolute';
                                                clock.style.width=100;
                                                clock.style.height=100;
                                                clock.style.backgroundColor= 0xffffff;
                                                //clock.style.color=color;//"red";
                                                clock.style.top=570+'px';//
                                                clock.style.left=1250+'px';//
                                                document.body.appendChild(clock);
                   window.setInterval(
                    function(){
                        var d = new Date();
                        document.getElementById("clock").innerHTML = d.toLocaleTimeString();
                    }
                  , 1000);
                }
    </script>
</head>

<body>
<script src="js/build/three.js"></script>

<script>

			var camera, scene, renderer;
			var cameraOrtho, sceneOrtho;
            var sprite;
			var spriteTL, spriteTR, spriteBL, spriteBR, spriteC;
            var i=0;
            var text=[];
			var mapC;

		    var group,group_1s;

            var menu_1=[];
            var menu_2=[];
            var menu_3=[];

            var icon_1=[];
            var icon_2=[];
            var icon_3=[];
            var text=[];
            var texts;
            var i=0;
              group_1 = new THREE.Group();
			init();
			animate();
           //click object
			function init() {

				var width = window.innerWidth;
				var height = window.innerHeight;
                console.log(width);
                console.log(height);
				camera = new THREE.PerspectiveCamera( 60, width / height, 1, 2100 );
				camera.position.z = 1500;

				cameraOrtho = new THREE.OrthographicCamera( - width / 2, width / 2, height / 2, - height / 2, 1, 10 );
				cameraOrtho.position.z = 10;

				scene = new THREE.Scene();
				scene.fog = new THREE.Fog( 0x000000, 1500, 2100 );
                scene.background = new THREE.Color( 0xffffff );

				sceneOrtho = new THREE.Scene();
                 group_1 = new THREE.Group();
                  group = new THREE.Group();
				// create sprites
                scene.add(group_1);


				var amount = 200;
				var radius = 500;

				var textureLoader = new THREE.TextureLoader();
                //text .......
                write("Вот и вы на новой странице,  вам нужно нажать на "+
                  "окно windows что бы открылос меню и там нажать на ярлык Dhtmlx",550,300,"black");


                //ik
                textureLoader.load("textures/ik_1.png",createSpriteTL);
                //text
                 write("Dhtmlx",84,30,"black");
                //winr
                 textureLoader.load("textures/sprite0_4.png",createSpriteTLW);
                 write("winrar",163,30,"black");
                 textureLoader.load("textures/sprite0_3.png",createSpriteTLWor);
                 write("word",239,30,"black");
                //xp
                 textureLoader.load("textures/sprite0_xp.png",createSpriteXP);
                //menu_1
                textureLoader.load( "textures/XX.png", sprite_menu_1);
                textureLoader.load( "textures/ik_1.png", menu_ik);
                textureLoader.load( "textures/sprite0_4.png", menu_winr);
                textureLoader.load( "textures/sprite0_3.png", menu_word);
                textureLoader.load( "textures/user_1.png", menu_user);

                //menu_2
                textureLoader.load( "textures/windows_edit_1.png", sprite_menu_2);
                textureLoader.load( "textures/add_add.png", menu_2_add);
                textureLoader.load( "textures/Edit.png", menu_2_edit);
                textureLoader.load( "textures/delet.png", menu_2_delet);
                textureLoader.load( "textures/Exit.png", menu_2_Exit);
                //menu_3
                textureLoader.load( "textures/windows_edit_3.png", menu3);
                textureLoader.load( "textures/add_save.png", menu3add);
                textureLoader.load( "textures/canel.png", menu3canel);






				// renderer

				renderer = new THREE.WebGLRenderer();
				renderer.setPixelRatio( window.devicePixelRatio );
				renderer.setSize( window.innerWidth, window.innerHeight );
				renderer.autoClear = false; // To allow render overlay on top of sprited sphere

				document.body.appendChild( renderer.domElement );

				//
                document.addEventListener( 'mousedown', onDocumentMouseDown,false );
				window.addEventListener( 'resize', onWindowResize, false );
                window.addEventListener('resize',rise);
			}
			function rise(){
                camera.aspect=window.innerWidth/window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth,window.innerHeight);
            }


            function createSpriteTL( texture ) {
            	var material = new THREE.SpriteMaterial( { map: texture } );

				var width = material.map.image.width;
				var height = material.map.image.height;

				spriteTL = new THREE.Sprite( material );
				spriteTL.center.set( 0.0, 1.0 );
				spriteTL.scale.set( width, height, 1 );
				sceneOrtho.add( spriteTL );
				updateHUDSpriteTL();

            }
            function createSpriteXP( texture ) {
            	var material = new THREE.SpriteMaterial( { map: texture } );

				var width = material.map.image.width;
				var height = material.map.image.height;
                spriteBL = new THREE.Sprite( material );
				spriteBL.center.set( 3.1, 1.5 );//*
				spriteBL.scale.set( width*3, height*3, 1 );//*
				sceneOrtho.add( spriteBL );// see

				menu_1.push(spriteBL);
                group_1.add(spriteBL);
                updateHUDSpriteXP();
            }

                   function createSpriteTLW( texture ) {
                            var material = new THREE.SpriteMaterial( { map: texture } );

                            var width = material.map.image.width;
                            var height = material.map.image.height;

                            spriteTL = new THREE.Sprite( material );
                            spriteTL.center.set( 0.4,1.9 );
                            spriteTL.scale.set( width, height, 1 );
                            sceneOrtho.add( spriteTL );
                          updateHUDSpriteTL();

                        }
                        function createSpriteTLWor( texture ) {
                            var material = new THREE.SpriteMaterial( { map: texture } );

                            var width = material.map.image.width;
                            var height = material.map.image.height;

                            spriteTL = new THREE.Sprite( material );
                            spriteTL.center.set( 0.1,2.2 );
                            spriteTL.scale.set( width, height, 1 );
                            sceneOrtho.add( spriteTL );
                          updateHUDSpriteTL();

                        }
                        function sprite_menu_1( texture ) {//menu_1
                        var material = new THREE.SpriteMaterial( { map: texture } );

                            var width = material.map.image.width;
                            var height = material.map.image.height;
                            spriteBL = new THREE.Sprite( material );
                            spriteBL.center.set( 2, 0.49 );//*
                            spriteBL.scale.set( width*1, height*1.5, 1 );//*
                           // sceneOrtho.add( spriteBL );// see

                            menu_1.push(spriteBL);

                            updateHUDSpriteXP();
                           }
                             function  menu_ik( texture ) {
                               var material = new THREE.SpriteMaterial( { map: texture } );

                            var width = material.map.image.width;
                            var height = material.map.image.height;
                            spriteBL = new THREE.Sprite( material );
                            spriteBL.center.set( 4.48, 0.7 );//*
                            spriteBL.scale.set( width*2, height*2, 1 );//*
                           // sceneOrtho.add( spriteBL );// see
                            console.log(menu_1);
                            menu_1.push(spriteBL);
                            //group_1.add(spriteBL);
                            updateHUDSpriteXP();
                           }
                           function  menu_winr( texture ) {
                               var material = new THREE.SpriteMaterial( { map: texture } );

                            var width = material.map.image.width;
                            var height = material.map.image.height;
                            spriteBL = new THREE.Sprite( material );
                             spriteBL.center.set( 4.9, 0.2 );//*
                            spriteBL.scale.set( width*2, height*2, 1 );//*
                           // sceneOrtho.add( spriteBL );// see

                            menu_1.push(spriteBL);

                            updateHUDSpriteXP();
                           }

                           function  menu_word( texture ) {
                               var material = new THREE.SpriteMaterial( { map: texture } );

                            var width = material.map.image.width;
                            var height = material.map.image.height;
                            spriteBL = new THREE.Sprite( material );
                             spriteBL.center.set( 4.55, 0.3 );//*
                            spriteBL.scale.set( width*2, height*2, 1 );//*
                           // sceneOrtho.add( spriteBL );// see

                            menu_1.push(spriteBL);

                            updateHUDSpriteXP();
                           }
                           function  menu_user( texture ) {
                               var material = new THREE.SpriteMaterial( { map: texture } );
                            var width = material.map.image.width;
                            var height = material.map.image.height;
                            spriteBL = new THREE.Sprite( material );
                             spriteBL.center.set( 1.65, -0.2 );//*
                            spriteBL.scale.set( width*1, height*1, 1 );//*
                           // sceneOrtho.add( spriteBL );// see

                            menu_1.push(spriteBL);

                            updateHUDSpriteXP();
                           }
                           //menu_2
                           function  sprite_menu_2( texture ) {
                               var material = new THREE.SpriteMaterial( { map: texture } );

                                var width = material.map.image.width;
                                var height = material.map.image.height;

                                spriteC = new THREE.Sprite( material );
                                spriteC.center.set( +0.5, +0.5);
                                spriteC.scale.set( width*2, height*2, 1 );
                               // sceneOrtho.add( spriteC );
                                menu_2.push(spriteC);
                                updateHUDSpritesC();

                           }
                           function  menu_2_add( texture ) {
                               var material = new THREE.SpriteMaterial( { map: texture } );

                                var width = material.map.image.width;
                                var height = material.map.image.height;

                                spriteC = new THREE.Sprite( material );
                                spriteC.center.set( +3, +1.9);
                                spriteC.scale.set( width*2, height*2, 1 );
                               // sceneOrtho.add( spriteC );
                                menu_2.push(spriteC);
                                updateHUDSpritesC();

                           }
                           function  menu_2_edit( texture ) {
                               var material = new THREE.SpriteMaterial( { map: texture } );

                                var width = material.map.image.width;
                                var height = material.map.image.height;

                                spriteC = new THREE.Sprite( material );
                                 spriteC.center.set( +1.6, +1.85);
                                spriteC.scale.set( width*2, height*2, 1 );
                               // sceneOrtho.add( spriteC );
                                menu_2.push(spriteC);
                                updateHUDSpritesC();

                           }
                           function  menu_2_delet( texture ) {
                               var material = new THREE.SpriteMaterial( { map: texture } );

                                var width = material.map.image.width;
                                var height = material.map.image.height;

                                spriteC = new THREE.Sprite( material );
                                  spriteC.center.set( +0.1, +1.85);

                                spriteC.scale.set( width*2, height*2, 1 );
                               // sceneOrtho.add( spriteC );
                                menu_2.push(spriteC);
                                updateHUDSpritesC();

                           }
                            function  menu_2_Exit( texture ) {
                               var material = new THREE.SpriteMaterial( { map: texture } );

                                var width = material.map.image.width;
                                var height = material.map.image.height;

                                spriteC = new THREE.Sprite( material );
                                  spriteC.center.set( -1.8, +1.85);

                                spriteC.scale.set( width*2, height*2, 1 );
                               // sceneOrtho.add( spriteC );
                                menu_2.push(spriteC);
                                updateHUDSpritesC();

                           }
                           //menu_3
                             function  menu3( texture ) {
                               var material = new THREE.SpriteMaterial( { map: texture } );

                                var width = material.map.image.width;
                                var height = material.map.image.height;


                              spriteC = new THREE.Sprite( material );
                                 spriteC.center.set( -0.5, 0.5);
                                spriteC.scale.set( width, height, 1 );
                               //sceneOrtho.add( spriteC );
                                 menu_3.push(spriteC);
                               updateHUDSpritesC();
                           }
                            function  menu3add( texture ) {
                               var material = new THREE.SpriteMaterial( { map: texture } );

                                var width = material.map.image.width;
                                var height = material.map.image.height;


                              spriteC = new THREE.Sprite( material );
                                 spriteC.center.set( -3.7, 1.6);
                                 spriteC.scale.set( width*2, height*2, 1 );
                               //sceneOrtho.add( spriteC );
                                 menu_3.push(spriteC);
                               updateHUDSpritesC();
                           }
                            function  menu3canel( texture ) {
                               var material = new THREE.SpriteMaterial( { map: texture } );

                                var width = material.map.image.width;
                                var height = material.map.image.height;


                              spriteC = new THREE.Sprite( material );
                                spriteC.center.set( -5.5, 1.6);
                                spriteC.scale.set( width*2, height*2, 1 );
                               //sceneOrtho.add( spriteC );
                                 menu_3.push(spriteC);
                               updateHUDSpritesC();
                           }


			function updateHUDSprites() {

				var width = window.innerWidth / 2;
				var height = window.innerHeight / 2;

				spriteTL.position.set( - width, height, 1 ); // top left
				spriteTR.position.set( width, height, 1 ); // top right
				spriteBL.position.set( - width, - height, 1 ); // bottom left
				spriteBR.position.set( width, - height, 1 ); // bottom right
				spriteC.position.set( 0, 0, 1 ); // center

			}
			function updateHUDSpritesTR() {

				var width = window.innerWidth / 2;
				var height = window.innerHeight / 2;


				spriteTR.position.set( width, height, 1 ); // top right


			}

            	function updateHUDSpritesC() {
                        var width = window.innerWidth / 2;
                        var height = window.innerHeight / 2;
                        spriteC.position.set( 0, 0, 1 ); // center
            	}
            function updateHUDSpriteTL(){
                 var width = window.innerWidth / 2;
				var height = window.innerHeight / 2;

				spriteTL.position.set( - width, height, 1 ); // top left
            }
              function updateHUDSpriteXP(){
                 var width = window.innerWidth / 2;
				var height = window.innerHeight / 2;

				spriteBL.position.set( - width, - height, 1 ); // bottom left
            }
			function onWindowResize() {

				var width = window.innerWidth;
				var height = window.innerHeight;

				camera.aspect = width / height;
				camera.updateProjectionMatrix();

				cameraOrtho.left = - width / 2;
				cameraOrtho.right = width / 2;
				cameraOrtho.top = height / 2;
				cameraOrtho.bottom = - height / 2;
				cameraOrtho.updateProjectionMatrix();

				updateHUDSprites();

				renderer.setSize( window.innerWidth, window.innerHeight );

		        	}
             function onDocumentMouseDown( event ){

                                    event.preventDefault();

                                    var intersects = getIntersects( event.layerX, event.layerY );

                                       if ( intersects.length > 0 ) {

                                        var res = intersects.filter( function ( res ) {

                                            return res && res.object;

                                        } )[ 0 ];

                                        if ( res && res.object  ){

                                                switch(res.object){

                                                    case (menu_1[0]):
                                                         console.log("open menu 1");
                                                         console.log(text[0]);
                                                         //text[0].style.hidde=true;
                                                        //     group.add( sprite );
                                                          scene.add( menu_1[1] );
                                                          scene.add( menu_1[2]);
                                                            write("Dhtmlx",435,80,"white");
                                                          group_1.add(menu_1[2]);///
                                                          scene.add( menu_1[3] );
                                                            write("Winrar",368,80,"white");
                                                          scene.add( menu_1[4] );
                                                             write("Words",400,80,"white");
                                                          scene.add( menu_1[5] );//user
                                                            write("User",308,130,"white");//style //new sprite!!!
                                                             //scene.remove(text[0]);
                                                    ; break;

                                                    case(menu_1[2]): //menu_2
                                                     text[0].style.visibility="hidden";
                                                      write("Вам нужно нажать кнопку Добавить ,что бы появилось новое меню ",550,300,"black");
                                                     console.log("open menu 2");
                                                      scene.remove( menu_1[1] );
                                                      scene.remove( menu_1[2] );
                                                      scene.remove( menu_1[3] );
                                                      scene.remove( menu_1[4] );
                                                      scene.remove( menu_1[5] );

                                                      scene.add(menu_2[0]);
                                                      //text
                                                         write("Списко Пользователей",180,585,0xffffff);
                                                   write("№",220,440,0xffffff);write("Имя",220,650,0xffffff);write("Телефон",220,820,0xffffff);//static pole
                                                    write("1",250,440,0xffffff);write("Иван Иван",250,600,0xffffff);write("111",250,820);
                                                    write("2",280,440,0xffffff);write("Пертов Петров",280,600,0xffffff);write("222",280,820,0xffffff);
                                                    write("3",310,440,0xffffff);write("Семен Семен",310,600,0xffffff);write("333",310,820,0xffffff);

                                                      scene.add(menu_2[1]);
                                                      group_1.add(menu_2[1]);//
                                                      scene.add(menu_2[2]);
                                                      scene.add(menu_2[3]);
                                                      scene.add(menu_2[4]);

                                                    break;
                                                    case(menu_2[1])://new menu_3 no edit
                                                      console.log("open menu 3");
                                                      //  text[8].style.color="white";
                                                         text[8].style.visibility="hidden";
                                                      //menu _3
                                                      scene.add(menu_3[0]);
                                                      scene.add(menu_3[1]);
                                                      group_1.add(menu_3[1]);
                                                      scene.add(menu_3[2]);
                                                      group_1.add(menu_3[2]);
                                                       write("Добавить Пользователя",190,1060,"black");
                                                         write("Имя",220,1040,"black");
                                                         write("Телефон",280,1040,"black");

                                                        var input = document.createElement("INPUT") // create a new element
                                                        input.setAttribute("type","text");
                                                        input.setAttribute("value","|");
                                                        input.style.position='absolute';
                                                         input.style.width=50;
                                                         input.style.height=50;
                                                         input.style.top=240+'px';
                                                         input.style.left=1040+'px';
                                                        document.body.appendChild(input);
                                                         var input = document.createElement("INPUT") // create a new element
                                                        input.setAttribute("type","text");
                                                        input.setAttribute("value","|");
                                                        input.style.position='absolute';
                                                         input.style.width=50;
                                                         input.style.height=50;
                                                         input.style.top=300+'px';
                                                         input.style.left=1040+'px';
                                                        document.body.appendChild(input);
                                                    ; break;

                                                    case(menu_2[3]): console.log("X"); break;
                                                    case (menu_3[1]):
                                                      String.id[0]=1;
                                                      String.name[0]="Иван Иван";
                                                         String.number[0]=111;


                                                         String.id[1]=2;
                                                         String.name[1]="Петров Петров";
                                                         String.number[1]=856788;

                                                          String.id[2]=3;
                                                         String.name[2]="Семен Семен";
                                                         String.number[2]=878;

                                                          String.id[3]=4;
                                                         String.name[3]="Вася Васи";
                                                         String.number[3]=88888;

                                                         for(var i=0;i<3;i++){
                                                           for (var value of Object.values(String) ){
                                                                    console.log(value);
                                                                }
                                                            }

                                                    case (menu_3[2]): console.log("exit")
                                                        scene.remove( menu_3[0] );
                                                      scene.remove( menu_3[1] );
                                                      scene.remove( menu_3[2] );
                                                      text[9].style.visibility="hidden";
                                                      text[10].style.visibility="hidden";
                                                      text[11].style.visibility="hidden";
                                                    ; break;
                                                }
                                        }

                                    }
                                    animate();
                                }
			function animate() {

				requestAnimationFrame( animate );
				render();

			}

			function render() {

				var time = Date.now() / 1000;



				renderer.clear();
				renderer.render( scene, camera );
				renderer.clearDepth();
				renderer.render( sceneOrtho, cameraOrtho );

			}
			 var raycaster = new THREE.Raycaster();
                var mouseVector = new THREE.Vector3();

                function getIntersects( x, y ) {

                    x = ( x / window.innerWidth ) * 2 - 1;
                    y = - ( y / window.innerHeight ) * 2 + 1;

                    mouseVector.set( x, y, 0.5 );
                    raycaster.setFromCamera( mouseVector, camera );

                    return raycaster.intersectObject( group_1, true );//
                }




                             function write(string,x,y,color){
                    i++;
                   var text2=document.createElement('div');
                    text2.style.position='absolute';
                     text2.style.width=100;
                     text2.style.height=100;
                      text2.setAttribute("id","list"+i);
                     text2.style.backgroundColor= 0xffffff;
                     text2.style.color=color;//"red";
                     text2.innerHTML=string;
                     text2.style.top=x+'px';
                     text2.style.left=y+'px';
                     document.body.appendChild(text2);
                        text.push(text2);
                     console.log(text);
                  // removedElement(text[1]);
                }
                 function makeTextSprite(message,parameters,x,y){
                    if(parameters==undefined) parameters={};

                    var fontface=parameters.hasOwnProperty("fontface") ? parameters["fontface"]:"Arial";
                    var fontsize=parameters.hasOwnProperty("fontsize") ? parameters["fontsize"] :18;
                    var borderThickness=parameters.hasOwnProperty("borderThickness") ? parameters["borderThickness"] :4;
                    var borderColor=parameters.hasOwnProperty("borderColor") ? parameters["borderColor"] :{r:0,g:0,b:0,a:1.0};
                    var backgroundColor=parameters.hasOwnProperty("backgroundColor") ? parameters["backgroundColor"] :{r:255,g:255,b:255,a:1.0};
                    var textColor=parameters.hasOwnProperty("textColor") ? parameters["textColor"] :{r:0,g:0,b:0,a:1.0};

                    var canvas=document.createElement('canvas');
                    var context=canvas.getContext('2d');

                     context.font = "Bold " + fontsize + "px " + fontface;
                   context.setTransform(1,0,0,-1,0,canvas.height);
                   // context.fillRect(70, 0, 100, 30);
                    var metrics=context.measureText(message);
                    var textWidth=metrics.width;

                    context.fillStyle ="rgba("+backgroundColor.r +"," +backgroundColor.g +"," +backgroundColor.b +"," +backgroundColor.a +")";
                    context.strokeStyle="rgba(" +borderColor.r + "," +borderColor.g + "," + borderColor.b + "," +borderColor.r + ")";

                  //  context.lineWidth=borderThickness;
                  //  roundRect(context,borderThickness/2,borderThickness/2,(textWidth +borderThickness )*1.1,fontsize *1.4+ borderThickness,8);

                  //  context.fillStyle="rgba(" + backgroundColor.r + "," + backgroundColor.g + "," + backgroundColor.b + "," + backgroundColor.a + ")";
                  //  context.strokeStyle="rgba(" + borderColor.r + ","+ borderColor.g + ","+ borderColor.b + ","+ borderColor.a + ")" ;

                  //  context.lineWidth=borderThickness;
                   // roundRect(context,borderThickness/2,borderThickness/2,(textWidth + borderThickness)*1.1,fontsize *1.4 +borderThickness, 8);

                    context.fillStyle="rgba(" + textColor.r +","+ textColor.g +","+ textColor.b +",1.0)";
                    context.fillText( message, borderThickness, fontsize + borderThickness);

                    var texture =new THREE.Texture(canvas);
                    texture.needsUpdate=true;


                    var spriteMaterial=new THREE.SpriteMaterial({map:texture,useScreenCoordinates:false});
                    var sprite =new THREE.Sprite(spriteMaterial);

                    var width = spriteMaterial.map.image.width;
                    var height = spriteMaterial.map.image.height;


                    sprite.center.set( x,y );
                    sprite.scale.set( width, height, 1 );

                      var width = window.innerWidth / 2;
			    	    var height = window.innerHeight / 2;

				     sprite.position.set( - width, height, 1 );//tl
                    return sprite;
                }
                function roundRect(ctx, x, y, w, h, r)
                            {
                                ctx.beginPath();
                                ctx.moveTo(x+r, y);
                                ctx.lineTo(x+w-r, y);
                                ctx.quadraticCurveTo(x+w, y, x+w, y+r);
                                ctx.lineTo(x+w, y+h-r);
                                ctx.quadraticCurveTo(x+w, y+h, x+w-r, y+h);
                                ctx.lineTo(x+r, y+h);
                                ctx.quadraticCurveTo(x, y+h, x, y+h-r);
                                ctx.lineTo(x, y+r);
                                ctx.quadraticCurveTo(x, y, x+r, y);
                                ctx.closePath();
                                ctx.fill();
                                ctx.stroke();
                            }
		</script>
</body>
</html>
